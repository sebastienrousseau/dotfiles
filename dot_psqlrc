\set QUIET 1

-- Prompt: database[user]@host:port=#
\set PROMPT1 '%[%033[1;34m%]%/%[%033[0m%][%[%033[1;32m%]%n%[%033[0m%]@%[%033[1;33m%]%M:%>%[%033[0m%]]%R%# '
\set PROMPT2 '%R%# '

-- Better NULL display
\pset null '[NULL]'

-- Expanded auto output for wide tables
\x auto

-- Autocomplete keywords in uppercase
\set COMP_KEYWORD_CASE upper

-- History settings
\set HISTSIZE 10000
\set HISTCONTROL ignoredups
\set HISTFILE ~/.local/share/psql/history

-- Timing on by default
\timing

-- Better error verbosity
\set VERBOSITY verbose

-- Show query row counts
\pset footer on

-- Wrap lines for readability
\pset format wrapped
\pset linestyle unicode
\pset border 2

-- Helpful shortcuts
\set version 'SELECT version();'
\set extensions 'SELECT * FROM pg_available_extensions ORDER BY name;'
\set activity 'SELECT pid, usename, application_name, client_addr, state, query FROM pg_stat_activity WHERE state IS NOT NULL ORDER BY state;'
\set locks 'SELECT pid, relation::regclass, mode, granted FROM pg_locks WHERE relation IS NOT NULL;'
\set dbsize 'SELECT datname, pg_size_pretty(pg_database_size(datname)) AS size FROM pg_database ORDER BY pg_database_size(datname) DESC;'
\set tablesize 'SELECT schemaname, tablename, pg_size_pretty(pg_total_relation_size(schemaname || ''.'' || tablename)) AS size FROM pg_tables ORDER BY pg_total_relation_size(schemaname || ''.'' || tablename) DESC LIMIT 20;'

\set QUIET 0

\echo 'psql ready. Type :version, :extensions, :activity, :locks, :dbsize, or :tablesize for shortcuts.'
